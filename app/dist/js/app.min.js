!function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=["$rootScope",function(e){"ngInject";e.$on("$stateChangeStart",function(e,t){})}]},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=["$stateProvider","$urlRouterProvider",function(e,t){"ngInject";e.state("app",{url:"/app",templateUrl:"views/main.html",controller:"mainCtrl",controllerAs:"main",abstract:!0}).state("app.home",{url:"/home",templateUrl:"views/home.html",controller:"homeCtrl",controllerAs:"home"}).state("app.downloads",{url:"/downloads",templateUrl:"views/downloads.html",controller:"downloadsCtrl",controllerAs:"downloads"}).state("app.queue",{url:"/queue",templateUrl:"views/queue.html",controller:"queueCtrl",controllerAs:"queue"}),t.otherwise("app/home")}]},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=e("./Routes"),o=r(i),s=e("./Bootstrap"),u=r(s),a=e("./controllers/Controllers"),l=r(a),c=e("./services/Services"),f=r(c);angular.module("showFlix",["ui.router","btford.socket-io","ngMaterial",l.default.name,f.default.name]).config(o.default).run(u.default)},{"./Bootstrap":1,"./Routes":2,"./controllers/Controllers":5,"./services/Services":13}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.$ApiService=t,this.$mdDialog=n}return e.$inject=["ApiService","$mdDialog"],i(e,[{key:"add",value:function(){var e=this;return isNaN(this.input.toepisode)&&"f"!==this.input.toepisode?window.Materialize.toast('Sorry the to episode should be a number or "f"',4e3,"red"):"f"!==this.input.toepisode&&parseInt(this.input.toepisode,10)<parseInt(this.input.fromepisode,10)?window.Materialize.toast("The to episode should be greater or equals from episode",4e3,"red"):(this.addQueueProgress=!0,this.$ApiService.addtoQueue(this.input.name,this.input.season,this.input.fromepisode,this.input.toepisode).then(function(t){t.status&&window.Materialize.toast("The result has been added to the queue",4e3,"green"),e.addQueueProgress=!1,e.$mdDialog.cancel()}))}},{key:"cancel",value:function(){this.$mdDialog.cancel()}}]),e}();n.default=o},{}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./HomeController"),o=r(i),s=e("./MainController"),u=r(s),a=e("./DownloadsController"),l=r(a),c=e("./QueueController"),f=r(c),d=e("./AddToQueueController"),h=r(d),p=e("./SubtitlesController"),v=r(p);n.default=angular.module("showFlix.controllers",[]).controller("mainCtrl",u.default).controller("homeCtrl",o.default).controller("downloadsCtrl",l.default).controller("queueCtrl",f.default).controller("addtoQueueCtrl",h.default).controller("subtitlesCtrl",v.default)},{"./AddToQueueController":4,"./DownloadsController":6,"./HomeController":7,"./MainController":8,"./QueueController":9,"./SubtitlesController":10}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i){var o=this;r(this,e),this.$ApiService=t,this.$socket=n,this.loading=!0,this.$ApiService.getDownloads().then(this.setDownloads.bind(this)),this.$socket.on("downloadsChanged",this.setDownloads.bind(this)),i.$on("$stateChangeStart",function(e,t){"app.downloads"!==t.name&&o.$socket.off("downloadsChanged",o.setDownloads.bind(o))})}return e.$inject=["ApiService","SocketService","$rootScope"],i(e,[{key:"setDownloads",value:function(e){this.loading=!1,e.forEach(function(e){var t=e;t.progress.progress=t.progress.progress.toFixed(2),t.progress.written=window.filesize(t.progress.written),t.progress.size=window.filesize(t.progress.size),t.progress.speed=window.filesize(t.progress.speed),t.progress.timeRemaining=window.humanizeDuration(t.progress.timeRemaining,{delimiter:" and ",largest:2,round:!0})}),this.files=e}}]),e}();n.default=o},{}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,o){var s=this;r(this,e),this.$ApiService=t,this.$socket=n,this.$mdDialog=o,this.loading=!0,this.$ApiService.getFiles().then(this.getFiles.bind(this)),this.$socket.on("mediasChanged",this.getFiles.bind(this)),i.$on("$stateChangeStart",function(e,t){"app.home"!==t.name&&s.$socket.off("mediasChanged",s.getFiles.bind(s))})}return e.$inject=["ApiService","SocketService","$rootScope","$mdDialog"],i(e,[{key:"getFiles",value:function(e){this.loading=!1,this.Files=e}},{key:"confirmDelete",value:function(e,t){var n=this,r=this.$mdDialog.confirm().title("Confirm").textContent("Are you sure you wanna delete this episode?").ariaLabel("delete").targetEvent(t).ok("Yes").cancel("No");this.$mdDialog.show(r).then(function(){n.Files.splice(n.Files.indexOf(e),1),n.$ApiService.deleteFile(e.streamUrl)}).catch(function(){})}},{key:"openSubtitlesDialog",value:function(e,t){this.$mdDialog.show({controller:"subtitlesCtrl",controllerAs:"subs",templateUrl:"views/subtitlesDialog.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1,locals:{file:e}})}}]),e}();n.default=o},{}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i,o){var s=this;r(this,e),this.$ApiService=t,this.$socket=n,this.$mdDialog=o,this.serverOn=!1,$(".button-collapse").sideNav(),i(function(){return s.$socket.emit("serverStat")},2e3),this.$socket.on("log",function(e){window.Materialize.toast(e.str,4e3,e.color)}),this.$socket.on("serverStat",function(e){s.serverOn=e.running})}return e.$inject=["ApiService","SocketService","$interval","$mdDialog"],i(e,[{key:"toggleServer",value:function(){var e=this;this.$ApiService.toggleServer(this.serverOn?"stop":"start").then(function(){return e.$socket.emit("serverStat")})}},{key:"showAddtoQueue",value:function(e){this.$mdDialog.show({controller:"addtoQueueCtrl",controllerAs:"addtoQueue",templateUrl:"views/addtoQueue.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})}}]),e}();n.default=o},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i){var o=this;r(this,e),this.$ApiService=t,this.$socket=n,this.loading=!0,this.$ApiService.getQueue().then(this.getQueue.bind(this)),this.$socket.on("queueChanged",this.getQueue.bind(this)),this.$socket.on("serverStat",this.stateEvent.bind(this)),i.$on("$stateChangeStart",function(e,t){"app.home"!==t.name&&(o.$socket.off("queueChanged",o.getQueue.bind(o)),o.$socket.off("serverStat",o.stateEvent.bind(o)))})}return e.$inject=["ApiService","SocketService","$rootScope"],i(e,[{key:"deleteFromQueue",value:function(e,t,n){this.queue.splice(n,1),this.$ApiService.deleteQueue(t.name,t.season,t.episode).then(function(){window.Materialize.toast("Item has been deleted successfly",4e3,"green")}).catch(function(){})}},{key:"startFrom",value:function(e){var t=this,n=this.queue.filter(function(e){return e.done}),r=e-n.length;this.$ApiService.startFrom(r).then(function(){t.$socket.emit("serverStat")})}},{key:"getQueue",value:function(e){this.loading=!1,this.queue=e}},{key:"stateEvent",value:function(e){this.queue[e.queueIndex]&&(this.queue[e.queueIndex].noOptions=e.running)}}]),e}();n.default=o},{}],10:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i){r(this,e),this.$ApiService=t,this.$mdDialog=n,this.file=i,this.loading=!0,this.filename="",this.$ApiService.getSubs(i.subs).then(this.getSubs.bind(this))}return e.$inject=["ApiService","$mdDialog","file"],i(e,[{key:"getSubs",value:function(e){this.loading=!1,this.subtitles=e.subs,this.filename=e.filename}},{key:"downloadSub",value:function(){var e=this;this.progress=!0,this.$ApiService.downloadSub(this.file.subs,this.selected.link).then(function(){e.progress=!1,window.Materialize.toast("Subtitle has been addedd successfly.",4e3,"green"),e.cancel()}).catch(function(){return e.cancel()})}},{key:"search",value:function(){this.loading=!0,this.$ApiService.getSubs(this.file.subs+"?filename="+this.filename).then(this.getSubs.bind(this))}},{key:"cancel",value:function(){this.$mdDialog.cancel()}}]),e}();n.default=o},{}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.$http=t,this.$ErrorHandler=n}return e.$inject=["$http","ErrorHandler"],i(e,[{key:"wrapforError",value:function(e){var t=this;return e.then(function(e){return e.data}).then(function(e){return Object.prototype.hasOwnProperty.call(e,"status")&&!e.status?Promise.reject(e.error):e}).catch(function(e){return t.$ErrorHandler.parse(e),Promise.reject(e)})}},{key:"toggleServer",value:function(e){return this.wrapforError(this.$http.get("api/server/"+e))}},{key:"getFiles",value:function(){return this.wrapforError(this.$http.get("api/files"))}},{key:"deleteFile",value:function(e){return this.wrapforError(this.$http.delete("api"+e))}},{key:"getDownloads",value:function(){return this.wrapforError(this.$http.get("api/downloads"))}},{key:"getQueue",value:function(){return this.wrapforError(this.$http.get("api/queue"))}},{key:"deleteQueue",value:function(e,t,n){return this.wrapforError(this.$http({url:"api/queue",method:"DELETE",data:{name:e,season:t,episode:n},headers:{"Content-Type":"application/json;charset=utf-8"}}))}},{key:"startFrom",value:function(e){return this.wrapforError(this.$http({method:"GET",url:"api/server/start",params:{index:e}}))}},{key:"addtoQueue",value:function(e,t,n,r){return this.wrapforError(this.$http.post("/api/queue",{keyword:e,season:t,from:n,to:r}))}},{key:"getSubs",value:function(e){return this.wrapforError(this.$http.get("api"+e))}},{key:"downloadSub",value:function(e,t){return this.wrapforError(this.$http.post("api"+e,{link:t}))}}]),e}();n.default=o},{}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.alert=window.Materialize.toast}return i(e,[{key:"parse",value:function(e){return"string"==typeof e?this.alert(e,4e3,"red"):!Array.isArray(e)||this.alert(e[0].msg,4e3,"red")}}]),e}();n.default=o},{}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./ApiService"),o=r(i),s=e("./SocketService"),u=r(s),a=e("./ErrorHandler"),l=r(a);n.default=angular.module("showFlix.services",[]).service("SocketService",u.default).service("ApiService",o.default).service("ErrorHandler",l.default)},{"./ApiService":11,"./ErrorHandler":12,"./SocketService":14}],14:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=this;r(this,e),this.events=[],this.$socket=t(),this.$socket.on("all",function(e){n.evtsOccured(e.evt,e.data)})}return e.$inject=["socketFactory"],i(e,[{key:"evtsOccured",value:function(e,t){var n=this.events[e]?this.events[e]:[];n.forEach(function(e){e(t)})}},{key:"on",value:function(e,t){this.events[e]&&this.events[e].push(t),this.events[e]=[t]}},{key:"off",value:function(e,t){this.events[e]&&this.events[e].splice(this.events[e].indexOf(t),1)}},{key:"emit",value:function(e,t){this.$socket.emit(e,t)}}]),e}();n.default=o},{}]},{},[3]);
//# sourceMappingURL=app.min.js.map
