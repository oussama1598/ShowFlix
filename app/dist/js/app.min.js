"use strict";angular.module("showFlex",["ngCookies","ngResource","ngSanitize","ui.router","ngMaterial","ngMdIcons","btford.socket-io"]).config(["$stateProvider","$urlRouterProvider","$mdThemingProvider",function(e,t,o){e.state("app",{url:"/app",templateUrl:"views/main.html",controller:"MainCtrl",abstract:!0}).state("app.home",{url:"/home",views:{mainView:{templateUrl:"views/home.html",controller:"homeCtrl"}}}).state("app.downloads",{url:"/downloads",views:{mainView:{templateUrl:"views/downloads.html",controller:"downCtrl"}}}).state("app.settings",{url:"/settings",views:{mainView:{templateUrl:"views/settings.html",controller:"settingsCtrl"}}}).state("app.queue",{url:"/queue",views:{mainView:{templateUrl:"views/queue.html",controller:"queueCtrl"}}}),t.otherwise("/app/home"),o.theme("default").primaryPalette("pink")}]).run(["$rootScope","socketEvt",function(e,t){e.$on("$stateChangeStart",function(e,o,r,n,a,i){"app.downloads"!==o.name&&t.emit("watchDownloads",!1),"app.queue"!==o.name&&t.emit("watchQueue",!1)})}]).filter("iif",function(){return function(e,t,o){return e?t:o}});
"use strict";angular.module("showFlex").controller("downCtrl",["$scope","socketEvt","$rootScope",function(a,o,n){a.files=[],a.loading=!0,a.changed=function(o){a.loading=!1,a.parseNewData(o)},a.parseNewData=function(o){a.files=o},o.emit("watchDownloads",!0),o.add("downloadsChanged",a.changed),n.$on("$stateChangeStart",function(n,e,t,d,l,s){"app.downloads"!==e.name&&o.remove("downloadsChanged",a.changed)})}]);
"use strict";angular.module("showFlex").controller("homeCtrl",["$scope","$http","$interval","socketEvt","$mdDialog","$rootScope",function(e,t,o,n,l,i){e.files=[],e.loading=!0,e.getFiles=function(){t({method:"GET",url:"/medias?id="+Math.random(),headers:{"Cache-Control":"no-cache"}}).then(function(t){e.loading=!1,e.files=t.data})},e.removeFileByStreamUrl=function(t){_.each(e.files,function(o,n){o&&o.streamUrl===t&&e.files.splice(n,1)})},e.delete=function(o,n){e.removeFileByStreamUrl(o),t.delete(o).then(function(t){e.getFiles(),e.removeFileByStreamUrl(o)})},e.confirmDelete=function(t,o){var n=l.confirm().title("Confirm").textContent("Are you sure you wanna delete this episode?").ariaLabel("delete").targetEvent(o).ok("Yes").cancel("No");l.show(n).then(function(){e.delete(t,o)})},e.getFiles()}]);
"use strict";angular.module("showFlex").controller("MainCtrl",["$scope","$mdSidenav","socketEvt","$interval","$http","$mdDialog",function(e,t,o,r,n,s){function a(e,t){e.cancel=function(){t.cancel()},e.add=function(){var o=e.addtoQueue;return isNaN(o.toepisode)&&"f"!==o.toepisode?void Materialize.toast("Sorry the to episode should be a number or 'f'",4e3,"red"):"f"!==o.toepisode&&parseInt(o.toepisode)<parseInt(o.fromepisode)?void Materialize.toast("The to episode should be greater or equals from episode",4e3,"red"):(e.addQueueProgress=!0,void n.post("/addToqueue",{keyword:o.name,season:o.season,from:o.fromepisode,to:o.toepisode}).then(function(o){return e.addQueueProgress=!1,o.data.status?void t.cancel():void Materialize.toast(o.data.error,4e3,"red")}))}}e.serverOn=!1,e.addQueueProgress=!1,$(".button-collapse").sideNav(),o.add("log",function(e){Materialize.toast(e.str,4e3,"white"!==e.color?e.color:"")}),o.emit("serverStat"),r(function(){o.emit("serverStat")},7e3),o.add("serverStat",function(t){e.serverOn=t.running}),e.sendReq=function(e){return n({method:"GET",url:e})},e.startServer=function(){e.serverOn?e.sendReq("/stop").then(function(e){o.emit("serverStat")}):e.sendReq("/start").then(function(e){o.emit("serverStat")})},e.showAddtoQueue=function(e){s.show({controller:["$scope","$mdDialog",a],templateUrl:"views/addtoQueue.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})}}]);
angular.module("showFlex").controller("queueCtrl",["$scope","socketEvt","$rootScope","$http",function(e,a,t,n){e.queue=[],e.loading=!0,e.changed=function(a){e.loading=!1,e.parseNewData(a)},e.parseNewData=function(a){e.queue=a},e.deleteFromQueue=function(a,t,u){e.queue.splice(u,1),n.post("/queue",{name:t.name,season:t.season,episode:t.episode}).then(function(e){e.data.status&&Materialize.toast("Item has been deleted successfly",4e3,"green")})},a.emit("watchQueue",!0),a.add("queueChanged",e.changed),t.$on("$stateChangeStart",function(t,n,u,o,s,c){"app.queue"!==n.name&&a.remove("queueChanged",e.changed)})}]);
angular.module("showFlex").controller("settingsCtrl",["$scope","socketEvt","$rootScope","$mdDialog",function(o,t,e,l){}]);
angular.module("showFlex").factory("serverSocket",["socketFactory",function(e){return e()}]);
angular.module("showFlex").factory("socketEvt",["serverSocket",function(n){function t(t,o){n.emit(t,o)}function o(n,t){i[n]?i[n].push(t):i[n]=[t]}function e(n,t){i[n]&&i[n].splice(i[n].indexOf(t),1)}function c(n,t){const o=i[n]?i[n]:[];o.forEach(function(n){n(t)})}var i={};return n.on("all",function(n){c(n.evt,n.data)}),{add:o,remove:e,emit:t,evts:i}}]);