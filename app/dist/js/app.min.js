!function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=["$rootScope",function(e){"ngInject";e.$on("$stateChangeStart",function(e,t){})}]},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=["$stateProvider","$urlRouterProvider",function(e,t){"ngInject";e.state("app",{url:"/app",templateUrl:"views/main.html",controller:"mainCtrl",controllerAs:"main",abstract:!0}).state("app.home",{url:"/home",templateUrl:"views/home.html",controller:"homeCtrl",controllerAs:"home"}).state("app.downloads",{url:"/downloads",templateUrl:"views/downloads.html",controller:"downloadsCtrl",controllerAs:"downloads"}).state("app.queue",{url:"/queue",templateUrl:"views/queue.html",controller:"queueCtrl",controllerAs:"queue"}),t.otherwise("app/home")}]},{}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=e("./Routes"),i=r(o),s=e("./Bootstrap"),u=r(s),a=e("./controllers/Controllers"),c=r(a),l=e("./services/Services"),f=r(l);angular.module("showFlex",["ui.router","btford.socket-io","ngMaterial",c.default.name,f.default.name]).config(i.default).run(u.default)},{"./Bootstrap":1,"./Routes":2,"./controllers/Controllers":4,"./services/Services":10}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./HomeController"),i=r(o),s=e("./MainController"),u=r(s),a=e("./DownloadsController"),c=r(a),l=e("./QueueController"),f=r(l);n.default=angular.module("showFlex.controllers",[]).controller("mainCtrl",u.default).controller("homeCtrl",i.default).controller("downloadsCtrl",c.default).controller("queueCtrl",f.default)},{"./DownloadsController":5,"./HomeController":6,"./MainController":7,"./QueueController":8}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o){var i=this;r(this,e),this.$ApiService=t,this.$socket=n,this.loading=!0,this.$ApiService.getDownloads().then(this.setDownloads.bind(this)),this.$socket.on("downloadsChanged",this.setDownloads.bind(this)),o.$on("$stateChangeStart",function(e,t){"app.downloads"!==t.name&&i.$socket.off("downloadsChanged",i.setDownloads.bind(i))})}return e.$inject=["ApiService","SocketService","$rootScope"],o(e,[{key:"setDownloads",value:function(e){this.loading=!1,e.forEach(function(e){var t=e;t.progress.progress=t.progress.progress.toFixed(2),t.progress.written=window.filesize(t.progress.written),t.progress.size=window.filesize(t.progress.size),t.progress.speed=window.filesize(t.progress.speed),t.progress.timeRemaining=window.humanizeDuration(t.progress.timeRemaining,{delimiter:" and ",largest:2,round:!0})}),this.files=e}}]),e}();n.default=i},{}],6:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o,i){var s=this;r(this,e),this.$ApiService=t,this.$socket=n,this.$mdDialog=i,this.loading=!0,this.$ApiService.getFiles().then(this.getFiles.bind(this)),this.$socket.on("mediasChanged",this.getFiles.bind(this)),o.$on("$stateChangeStart",function(e,t){"app.home"!==t.name&&s.$socket.off("mediasChanged",s.getFiles.bind(s))})}return e.$inject=["ApiService","SocketService","$rootScope","$mdDialog"],o(e,[{key:"getFiles",value:function(e){this.loading=!1,this.Files=e}},{key:"confirmDelete",value:function(e,t){var n=this,r=this.$mdDialog.confirm().title("Confirm").textContent("Are you sure you wanna delete this episode?").ariaLabel("delete").targetEvent(t).ok("Yes").cancel("No");this.$mdDialog.show(r).then(function(){n.Files.splice(n.Files.indexOf(e),1),n.$ApiService.deleteFile(e.streamUrl)}).catch(function(){})}}]),e}();n.default=i},{}],7:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o){var i=this;r(this,e),this.$ApiService=t,this.$socket=n,this.serverOn=!1,$(".button-collapse").sideNav(),o(function(){return i.$socket.emit("serverStat")},2e3),this.$socket.on("log",function(e){window.Materialize.toast(e.str,4e3,e.color)}),this.$socket.on("serverStat",function(e){i.serverOn=e.running})}return e.$inject=["ApiService","SocketService","$interval"],o(e,[{key:"toggleServer",value:function(){var e=this;this.$ApiService.toggleServer(this.serverOn?"stop":"start").then(function(t){return t.data.status?e.$socket.emit("serverStat"):e.$ApiService.showError(t.data.error)})}}]),e}();n.default=i},{}],8:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n,o){var i=this;r(this,e),this.$ApiService=t,this.$socket=n,this.loading=!0,this.$ApiService.getQueue().then(this.getQueue.bind(this)),this.$socket.on("queueChanged",this.getQueue.bind(this)),this.$socket.on("serverStat",this.stateEvent.bind(this)),o.$on("$stateChangeStart",function(e,t){"app.home"!==t.name&&(i.$socket.off("queueChanged",i.getQueue.bind(i)),i.$socket.off("serverStat",i.stateEvent.bind(i)))})}return e.$inject=["ApiService","SocketService","$rootScope"],o(e,[{key:"deleteFromQueue",value:function(e,t,n){this.queue.splice(n,1),this.$ApiService.deletQueue(t.name,t.season,t.episode).then(function(){window.Materialize.toast("Item has been deleted successfly",4e3,"green")})}},{key:"startFrom",value:function(e){var t=this,n=this.queue.filter(function(e){return e.done}),r=e-n.length;this.$ApiService.startFrom(r).then(function(){t.$socket.emit("serverStat")})}},{key:"getQueue",value:function(e){this.loading=!1,this.queue=e}},{key:"stateEvent",value:function(e){this.queue[e.queueIndex]&&(this.queue[e.queueIndex].noOptions=e.running)}}]),e}();n.default=i},{}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.$http=t}return e.$inject=["$http"],o(e,[{key:"toggleServer",value:function(e){var t=this;return this.$http.get("api/server/"+e).catch(function(e){t.showError(e)})}},{key:"getFiles",value:function(){var e=this;return this.$http.get("api/files").then(function(e){return e.data}).catch(function(t){e.showError(t)})}},{key:"deleteFile",value:function(e){var t=this;return this.$http.delete("api"+e).then(function(e){return!!e.status||Promise.reject(e.error)}).catch(function(e){t.showError(e)})}},{key:"getDownloads",value:function(){var e=this;return this.$http.get("api/downloads").then(function(e){return e.data}).catch(function(t){e.showError(t)})}},{key:"getQueue",value:function(){var e=this;return this.$http.get("api/queue").then(function(e){return e.data}).catch(function(t){e.showError(t)})}},{key:"deleteQueue",value:function(e,t,n){var r=this;return this.$http.delete("api/queue",{name:e,season:t,episode:n}).then(function(e){return!!e.status||Promise.reject(e.error)}).catch(function(e){r.showError(e)})}},{key:"startFrom",value:function(e){var t=this;return this.$http({method:"GET",url:"api/server/start",params:{index:e}}).then(function(e){return!!e.status||Promise.reject(e.error)}).catch(function(e){t.showError(e)})}}],[{key:"showError",value:function(e){window.Materialize.toast(e,4e3,"red")}}]),e}();n.default=i},{}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ApiService"),i=r(o),s=e("./SocketService"),u=r(s);n.default=angular.module("showFlex.services",[]).service("SocketService",u.default).service("ApiService",i.default)},{"./ApiService":9,"./SocketService":11}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){var n=this;r(this,e),this.events=[],this.$socket=t(),this.$socket.on("all",function(e){n.evtsOccured(e.evt,e.data)})}return e.$inject=["socketFactory"],o(e,[{key:"evtsOccured",value:function(e,t){var n=this.events[e]?this.events[e]:[];n.forEach(function(e){e(t)})}},{key:"on",value:function(e,t){this.events[e]&&this.events[e].push(t),this.events[e]=[t]}},{key:"off",value:function(e,t){this.events[e]&&this.events[e].splice(this.events[e].indexOf(t),1)}},{key:"emit",value:function(e,t){this.$socket.emit(e,t)}}]),e}();n.default=i},{}]},{},[3]);
//# sourceMappingURL=app.min.js.map
